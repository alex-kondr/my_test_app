import stringfrom agent import *from models.products import *import redef process_years(data, context, session):    for categoryline in data.xpath("//div[@class='id-Teaser-el-content']"): 			        context['product_url'] = categoryline.xpath("following-sibling::a[1]/@href").string() 			        context['product_name'] = categoryline.xpath("h3//text()[string-length(normalize-space(.))>1]").string() 			        if context['product_url'] and context['product_name']: 			           session.queue(Request(context['product_url']), process_product, context) 			def process_product(data, context, session):     product = Product()    product.url = context['product_url']     product.ssid = re_search_once('(\d+).html', context['product_url'])    product.name = context['product_name']    product.category = 'Games'    review = Review()    review.ssid = product.ssid    review.title = product.name    review.url = product.url    review.type = 'pro'    review.date = data.xpath("//span[@class='id-Story-timestamp-content']/text()[string-length(normalize-space(.))>1]").string()    avt_n = data.xpath("//p[@class='id-Story-authors id-Story-authors--default']/a/@href").join("")    avt_u = data.xpath("//p[@class='id-Story-authors id-Story-authors--default']/a/text()[string-length(normalize-space(.))>1]").join("")    if avt_n and avt_u:       review.authors.append(Person(name = avt_n, profile_url = avt_u, ssid = review.ssid))       for list in data.xpath("//div[@class='id-Page-skyLayout id-SitePosHelperWrap']//img"):        src = list.xpath("@src").string()        if src:           product.properties.append(ProductProperty(type="image" , value = {'src': src}))    excerpt = data.xpath("//div[@class='id-Page-skyLayout id-SitePosHelperWrap']/p[text()[string-length(normalize-space(.))>100] or *//text()[string-length(normalize-space(.))>100]][1]//text()[string-length(normalize-space(.))>100]").join("")    if excerpt:         review.properties.append(ReviewProperty(type="excerpt", value = excerpt))    conclusion = data.xpath("//div[@class='id-Page-skyLayout id-SitePosHelperWrap']/p[text()[string-length(normalize-space(.))>100] or *//text()[string-length(normalize-space(.))>100]][last()]//text()[string-length(normalize-space(.))>100]").join("")    if conclusion:         review.properties.append(ReviewProperty(type="conclusion", value = conclusion))    if excerpt:        product.reviews.append(review)          session.emit(product)def run(context, session):#    session.browser.use_new_parser = "True"#    session.queue(Request('https://www.ingame.de/tests/reviews-sti1259318/'), process_view_category, {})      session.queue(Request('https://www.ingame.de/tests'), process_years, {}) 